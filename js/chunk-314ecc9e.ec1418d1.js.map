{"version":3,"sources":["webpack:///./src/components/Header.vue?6eb6","webpack:///src/components/Header.vue","webpack:///./src/components/Header.vue?4c35","webpack:///./src/components/Header.vue","webpack:///./src/components/Header.vue?cb19"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","click","choseCity","_s","_f","getCity","directives","name","rawName","value","expression","attrs","id","action","placeholder","search","onSearch","cancel","onCancel","clear","onClear","focus","goToSearch","model","callback","$$v","keyword","_l","link","index","key","$event","changeNav","class","navIndex","to","path","query","city","text","staticRenderFns","links","Headervue_type_script_lang_js_","computed","$route","vue_runtime_esm","localStorage","get","getNavIndex","data","center","lng","lat","loaded","created","methods","$router","push","set","filters","formatCity","length","substring","mounted","map","BMap","Map","point","Point","centerAndZoom","geolocation","Geolocation","that","getCurrentPosition","r","getStatus","BMAP_STATUS_SUCCESS","alert","enableHighAccuracy","components_Headervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Header_vue_vue_type_style_index_0_id_41f1bc4e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Header_vue_vue_type_style_index_0_id_41f1bc4e_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-314ecc9e.ec1418d1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-header\"},[_c('div',{staticClass:\"m-header-title\"},[_vm._v(\"电影\")]),_c('div',{staticClass:\"m-header-search\"},[_c('span',{staticClass:\"m-header-search-city\"},[_c('span',{on:{\"click\":_vm.choseCity}},[_vm._v(_vm._s(_vm._f(\"formatCity\")(_vm.getCity)))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],attrs:{\"id\":\"allmap\"}})]),_c('span',{staticClass:\"m-header-search-keyword\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch,\"cancel\":_vm.onCancel,\"clear\":_vm.onClear,\"focus\":_vm.goToSearch},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1)])]),_c('div',{staticClass:\"m-header-nav\"},_vm._l((_vm.links),function(link,index){return _c('span',{key:index,on:{\"click\":function($event){return _vm.changeNav(index)}}},[_c('router-link',{class:_vm.navIndex==index?'selected':'',attrs:{\"to\":{name:link.name,path:link.path,query:{city:_vm.getCity}}}},[_vm._v(_vm._s(link.text))])],1)}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"m-header\">\r\n    <div class=\"m-header-title\">电影</div>\r\n    <div class=\"m-header-search\">\r\n      <span class=\"m-header-search-city\">\r\n        <span @click=\"choseCity\">{{getCity|formatCity}}</span>\r\n        <div id=\"allmap\" v-show=\"false\"></div>\r\n      </span>\r\n      <span class=\"m-header-search-keyword\">\r\n        <form action=\"/\">\r\n          <van-search\r\n            v-model=\"keyword\"\r\n            placeholder=\"请输入搜索关键词\"\r\n            @search=\"onSearch\"\r\n            @cancel=\"onCancel\"\r\n            @clear=\"onClear\"\r\n            @focus=\"goToSearch\"\r\n          />\r\n        </form>\r\n      </span>\r\n    </div>\r\n    <div class=\"m-header-nav\">\r\n      <span @click=\"changeNav(index)\" v-for=\"(link,index) in links\" :key=\"index\">\r\n        <router-link\r\n          :class=\"navIndex==index?'selected':''\"\r\n          :to=\"{name:link.name,path:link.path,query:{city:getCity}}\"\r\n        >{{link.text}}</router-link>\r\n      </span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nlet links = [\r\n  {\r\n    name: \"wellReceived\",\r\n    path: \"/\",\r\n    text: \"正在热映\"\r\n  },\r\n  {\r\n    name: \"toBeShownSoon\",\r\n    path: \"/toBeShownSoon\",\r\n    text: \"即将上映\"\r\n  }\r\n];\r\nimport Vue from \"vue\";\r\nexport default {\r\n  name: \"mheader\",\r\n  computed: {\r\n    getCity() {\r\n      if (this.$route.query.city) {\r\n        return this.$route.query.city;\r\n      } else if (Vue.localStorage.get(\"city\")) {\r\n        return Vue.localStorage.get(\"city\");\r\n      } else {\r\n        return this.city;\r\n      }\r\n    },\r\n    getNavIndex() {\r\n      return Vue.localStorage.get(\"navIndex\")\r\n        ? 0\r\n        : Vue.localStorage.get(\"navIndex\");\r\n    }\r\n  },\r\n  data() {\r\n    let self = this;\r\n    return {\r\n      links: links,\r\n      keyword: \"\",\r\n      navIndex: \"\",\r\n      center: [119.24958, 26.04322],\r\n      lng: 0,\r\n      lat: 0,\r\n      loaded: false,\r\n      city: \"福州\"\r\n    };\r\n  },\r\n  created() {\r\n    //获取地名\r\n  },\r\n  methods: {\r\n    onSearch() {},\r\n    goToSearch() {\r\n      // console.log(\"test\");\r\n      this.$router.push({\r\n        name: \"search\",\r\n        path: \"/search\"\r\n      });\r\n    },\r\n    onCancel() {},\r\n    onClear() {},\r\n    changeNav(index) {\r\n      this.navIndex = index;\r\n      Vue.localStorage.set(\"navIndex\", index);\r\n    },\r\n    choseCity() {\r\n      this.$router.push({\r\n        name: \"province\",\r\n        path: \"/province\"\r\n      });\r\n    }\r\n  },\r\n  filters: {\r\n    formatCity: function(city) {\r\n      if (city != null && city != \"\" && city.length >= 2) {\r\n        return city.substring(0, 2);\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    // console.log( Vue.localStorage.get(\"navIndex\"));\r\n    this.navIndex = Vue.localStorage.get(\"navIndex\");\r\n    var map = new BMap.Map(\"allmap\");\r\n    var point = new BMap.Point(116.331398, 39.897445);\r\n    map.centerAndZoom(point, 12);\r\n    var geolocation = new BMap.Geolocation();\r\n    var that = this;\r\n    geolocation.getCurrentPosition(\r\n      function(r) {\r\n        if (this.getStatus() == BMAP_STATUS_SUCCESS) {\r\n          // that.city = r.address.city.replace(\"市\", \"\");\r\n          Vue.localStorage.set(\"city\", that.city);\r\n        } else {\r\n          alert(\"failed\" + this.getStatus());\r\n        }\r\n      },\r\n      { enableHighAccuracy: true }\r\n    );\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.m-header {\r\n  position: fixed;\r\n  width: 100%;\r\n  background: #fff;\r\n  z-index: 9000;\r\n}\r\n.m-header-title {\r\n  width: 100%;\r\n  height: 32px;\r\n  line-height: 32px;\r\n  background-color: rgb(25, 137, 250);\r\n  color: #fff;\r\n  text-indent: 10px;\r\n  /* border-radius: 5px; */\r\n}\r\n.m-header-search {\r\n  display: flex;\r\n  line-height: 54px;\r\n  height: 54px;\r\n}\r\n.m-header-search-city {\r\n  display: inline-block;\r\n  text-align: center;\r\n  width: 50px;\r\n}\r\n.m-header-search-keyword {\r\n  flex-grow: 1;\r\n}\r\n.m-header-nav {\r\n  width: 100%;\r\n  height: 32px;\r\n  display: flex;\r\n  line-height: 32px;\r\n}\r\n.m-header-nav span {\r\n  width: 50%;\r\n  text-align: center;\r\n  display: inline-block;\r\n}\r\na:link {\r\n  color: #000;\r\n}\r\na:visited {\r\n  color: #000;\r\n}\r\n.m-header-nav span a {\r\n  width: 100%;\r\n  text-align: center;\r\n  display: inline-block;\r\n  font-size: 16px;\r\n  transition: all 0.2s;\r\n}\r\n.m-header-nav span a.selected {\r\n  color: rgb(25, 137, 250);\r\n  font-weight: bold;\r\n  border-bottom: solid 2px rgb(25, 137, 250);\r\n}\r\n.m-header-search-city {\r\n  position: relative;\r\n}\r\n.m-header-search-city::after {\r\n  position: absolute;\r\n  content: \"\";\r\n  z-index: 100;\r\n  border: 5px solid #7d7e80;\r\n  border-top: 5px solid transparent;\r\n  border-right: 5px solid transparent;\r\n  top: 50%;\r\n  margin-top: -8px;\r\n  right: -8px;\r\n  transform: rotate(-45deg);\r\n  /* width:10px;\r\n  height: 10px;; */\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=41f1bc4e&scoped=true&\"\nimport script from \"./Header.vue?vue&type=script&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Header.vue?vue&type=style&index=0&id=41f1bc4e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41f1bc4e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=style&index=0&id=41f1bc4e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=style&index=0&id=41f1bc4e&scoped=true&lang=css&\""],"sourceRoot":""}